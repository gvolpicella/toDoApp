var todoList=function(){var t={divTodoList:document.getElementById("todoer-list-section")},e=function(e){var o="",n=e.length;if(n>0){o='<ul id="todoer-list">';for(var d=0;d<n;d++)o+='<li id="todo-'+d+'" class="'+e[d].state+'"><button class="checkboxed"><i class="fa fa-check" aria-hidden="true"></i></button><input class="todo-text" type="text" value="'+e[d].title+'" required></input><div class="todo-date"><i class="fa fa-calendar-o" aria-hidden="true"></i><input class="todo-date-input" type="date" value="'+e[d].date+'" required></input></div></li>';o+="</ul>";o+='<div class="div-actions container"><button id="clear-todos">Clear todos</button></div>'}else o="<p>You donâ€™t have anything to do. <strong>Add something now</strong>.</p>";t.divTodoList.innerHTML=o;return!1},o=function(){var e=function(t){t.target.closest("li").classList.remove("editing");var e=t.target.closest("li"),o=e.id.substr(5,1),n=e.querySelector(".todo-text").value,d=e.querySelector(".todo-date-input").value,a=e.className.replace("editing","").trim();todoController.edit(o,n,d,a)};t.divTodoList.addEventListener("click",function(t){if("clear-todos"===t.target.id)todoController.clear();else if("checkboxed"===t.target.parentNode.className){var o=t.target.parentNode.parentNode;o.classList.toggle("completed");e(t)}});t.divTodoList.addEventListener("click",function(t){if("todo-text"===t.target.className||"todo-date-input"===t.target.className){t.target.closest("li").classList.add("editing");t.target.addEventListener("blur",e)}})};(function(){o()})();return{set:e}}(),todoController=function(){var t=[],e=function(){var t=localStorage.getItem("todo");if(null!==t)return JSON.parse(t)},o=function(e,o){t.push({title:e,date:o,state:""});t.sort(i);localStorage.setItem("todo",JSON.stringify(t));todoList.set(t);return!1},n=function(e){e>-1&&t.splice(e,1);localStorage.setItem("todo",JSON.stringify(t));todoList.set(t);return!1},d=function(e,o,n,d){if(e&&o&&n){t[e].title=o;t[e].date=n;t[e].state=d;t.sort(i);localStorage.setItem("todo",JSON.stringify(t));todoList.set(t)}return!1},a=function(){t=[];localStorage.removeItem("todo");todoList.set(t);return!1},i=function(t,e){date1=new Date(t.date);date2=new Date(e.date);return date1<date2?-1:1};(function(){t=e();t?todoList.set(t):t=[]})();return{get:e,set:o,remove:n,clear:a,edit:d}}(),todoView=function(){var t={newTodo:document.getElementById("todoer-add"),newTodoText:document.getElementById("todoer-add-text"),newTodoDateInput:document.getElementById("todoer-add-date-input"),newTodoDateLabel:document.getElementById("todoer-add-date-label"),btnTodoSubmit:document.getElementById("todoer-add-submit")},e=function(e){this.classList.add("active");t.newTodoText.focus();e.stopPropagation();document.addEventListener("click",d)},o=function(e){t.newTodoDateLabel.classList.add("hidden");t.newTodoDateInput.click();t.newTodoDateInput.focus();e.stopPropagation()},n=function(e){e.stopPropagation();var o=t.newTodoText.value,n=t.newTodoDateInput.value;if(o&&n){e.preventDefault();todoController.set(o,n);a()}},d=function(){t.newTodo.classList.remove("active");t.newTodoText.blur();document.removeEventListener("click",d);t.newTodoDateLabel.classList.remove("hidden")},a=function(){t.newTodoText.value="";t.newTodoDateInput.value="";d()},i=function(){t.newTodo.addEventListener("click",e);t.newTodoDateLabel.addEventListener("click",o);t.newTodoDateInput.addEventListener("click",o);t.btnTodoSubmit.addEventListener("click",n)};(function(){i()})();return{}}();
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInRvZG9MaXN0LmpzIiwidG9kb0NvbnRyb2xsZXIuanMiLCJ0b2RvVmlldy5qcyJdLCJuYW1lcyI6WyJ0b2RvTGlzdCIsInNlbGVjdG9ycyIsImRpdlRvZG9MaXN0IiwiZG9jdW1lbnQiLCJnZXRFbGVtZW50QnlJZCIsInNldCIsInRvZG9zIiwidG9kb0xpc3RTdHIiLCJ0b2RvQ291bnQiLCJsZW5ndGgiLCJpIiwic3RhdGUiLCJ0aXRsZSIsImRhdGUiLCJpbm5lckhUTUwiLCJiaW5kRXZlbnRzIiwiZWRpdFRvZG9IYW5kbGVyIiwiZSIsInRhcmdldCIsImNsb3Nlc3QiLCJjbGFzc0xpc3QiLCJyZW1vdmUiLCJub2RlIiwiaW5kZXgiLCJpZCIsInN1YnN0ciIsInF1ZXJ5U2VsZWN0b3IiLCJ2YWx1ZSIsImNsYXNzTmFtZSIsInJlcGxhY2UiLCJ0cmltIiwidG9kb0NvbnRyb2xsZXIiLCJlZGl0IiwiYWRkRXZlbnRMaXN0ZW5lciIsImV2ZW50IiwiY2xlYXIiLCJwYXJlbnROb2RlIiwic2V0Q29tcGxldGUiLCJ0b2dnbGUiLCJhZGQiLCJnZXQiLCJsb2NhbFN0b3JhZ2UiLCJnZXRJdGVtIiwiSlNPTiIsInBhcnNlIiwicHVzaCIsInNvcnQiLCJjb21wYXJlU29ydCIsInNldEl0ZW0iLCJzdHJpbmdpZnkiLCJzcGxpY2UiLCJyZW1vdmVJdGVtIiwiYSIsImIiLCJkYXRlMSIsIkRhdGUiLCJkYXRlMiIsInRvZG9WaWV3IiwibmV3VG9kbyIsIm5ld1RvZG9UZXh0IiwibmV3VG9kb0RhdGVJbnB1dCIsIm5ld1RvZG9EYXRlTGFiZWwiLCJidG5Ub2RvU3VibWl0IiwibmV3VG9kb0hhbmRsZXIiLCJ0aGlzIiwiZm9jdXMiLCJzdG9wUHJvcGFnYXRpb24iLCJvdXRzaWRlQ2xpY2tIYW5kbGVyIiwibmV3VG9kb0RhdGVMYWJlbEhhbmRsZXIiLCJjbGljayIsImJ0blRvZG9TdWJtaXRIYW5kbGVyIiwicHJldmVudERlZmF1bHQiLCJyZXNldCIsImJsdXIiLCJyZW1vdmVF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LEVBQ0E5RCxHQUFBNEQsaUJBQUE1QixpQkFBQSxRQUFBbUMsRUFDQW5FLEdBQUEyRCxpQkFBQTNCLGlCQUFBLFFBQUFtQyxFQUNBbkUsR0FBQTZELGNBQUE3QixpQkFBQSxRQUFBcUMsS0FPQSxXQUNBdkQsT0FPQSIsImZpbGUiOiJ0b2RvZXIuanMiLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiogdG9kb0xpc3RcbiogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4qIGV4cG9zZSA6IFx0YWRkXG4qIFx0XHRcdHJlbW92ZVxuKiBcdFx0XHRzZXRcbiovXG52YXIgdG9kb0xpc3QgPSAoZnVuY3Rpb24oKSB7XG5cblx0dmFyIHNlbGVjdG9ycyA9IHtcblx0XHRkaXZUb2RvTGlzdCA6IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwidG9kb2VyLWxpc3Qtc2VjdGlvblwiKVxuXHR9O1xuXG5cdC8qKlxuICAgICogc2V0IHRvZG8gbGlzdFxuICAgICogQHB1YmxpY1xuICAgICovXHRcblx0dmFyIHNldCA9IGZ1bmN0aW9uKHRvZG9zKSB7XG5cblx0XHR2YXIgdG9kb0xpc3RTdHIgPSBcIlwiLFxuXHRcdFx0dG9kb0NvdW50ICAgPSB0b2Rvcy5sZW5ndGg7XG5cblx0XHRpZiAodG9kb0NvdW50ID4gMCkge1xuXG5cdFx0XHR0b2RvTGlzdFN0ciA9ICc8dWwgaWQ9XCJ0b2RvZXItbGlzdFwiPic7XG5cblx0XHRcdGZvciAodmFyIGkgPSAwOyBpIDwgdG9kb0NvdW50OyBpKyspIHtcblx0XHRcdFx0dG9kb0xpc3RTdHIgKz0gJzxsaSBpZD1cInRvZG8tJytpKydcIiBjbGFzcz1cIicrdG9kb3NbaV0uc3RhdGUrJ1wiPicgK1xuXHRcdFx0XHRcdCc8YnV0dG9uIGNsYXNzPVwiY2hlY2tib3hlZFwiPjxpIGNsYXNzPVwiZmEgZmEtY2hlY2tcIiBhcmlhLWhpZGRlbj1cInRydWVcIj48L2k+PC9idXR0b24+JyArXG5cdFx0XHRcdFx0JzxpbnB1dCBjbGFzcz1cInRvZG8tdGV4dFwiIHR5cGU9XCJ0ZXh0XCIgdmFsdWU9XCInK3RvZG9zW2ldLnRpdGxlKydcIiByZXF1aXJlZD48L2lucHV0PicgK1xuXHRcdFx0XHRcdCc8ZGl2IGNsYXNzPVwidG9kby1kYXRlXCI+JyArXG5cdFx0XHRcdFx0XHQnPGkgY2xhc3M9XCJmYSBmYS1jYWxlbmRhci1vXCIgYXJpYS1oaWRkZW49XCJ0cnVlXCI+PC9pPicgK1xuXHRcdFx0XHRcdFx0JzxpbnB1dCBjbGFzcz1cInRvZG8tZGF0ZS1pbnB1dFwiIHR5cGU9XCJkYXRlXCIgdmFsdWU9XCInK3RvZG9zW2ldLmRhdGUrJ1wiIHJlcXVpcmVkPjwvaW5wdXQ+JyArXG5cdFx0XHRcdFx0JzwvZGl2PicgK1xuXHRcdFx0XHQnPC9saT4nO1xuXHRcdFx0fVxuXG5cdFx0XHR0b2RvTGlzdFN0ciArPSAnPC91bD4nO1xuXG5cdFx0XHR0b2RvTGlzdFN0ciArPSAnPGRpdiBjbGFzcz1cImRpdi1hY3Rpb25zIGNvbnRhaW5lclwiPjxidXR0b24gaWQ9XCJjbGVhci10b2Rvc1wiPkNsZWFyIHRvZG9zPC9idXR0b24+PC9kaXY+JztcblxuXHRcdH0gZWxzZSB7XG5cdFx0XHR0b2RvTGlzdFN0ciA9IFwiPHA+WW91IGRvbuKAmXQgaGF2ZSBhbnl0aGluZyB0byBkby4gPHN0cm9uZz5BZGQgc29tZXRoaW5nIG5vdzwvc3Ryb25nPi48L3A+XCI7XG5cdFx0fVxuXG5cdFx0c2VsZWN0b3JzLmRpdlRvZG9MaXN0LmlubmVySFRNTCA9IHRvZG9MaXN0U3RyO1xuXHRcdHJldHVybiBmYWxzZTtcblxuXHR9O1xuXG5cdC8qKlxuICAgICogYmluZCBldmVudHNcbiAgICAqIEBwcml2YXRlXG4gICAgKi9cdFxuXHR2YXIgYmluZEV2ZW50cyA9IGZ1bmN0aW9uKCl7XHRcblxuXHRcdC8vIHVwZGF0ZSBvdXIgbW9kZWwgYWZ0ZXIgZWRpdGluZ1xuXHRcdHZhciBlZGl0VG9kb0hhbmRsZXIgPSBmdW5jdGlvbihlKSB7XHRcdFxuXHRcdFx0ZS50YXJnZXQuY2xvc2VzdChcImxpXCIpLmNsYXNzTGlzdC5yZW1vdmUoXCJlZGl0aW5nXCIpO1x0XG5cdFx0XHR2YXIgbm9kZSA9IGUudGFyZ2V0LmNsb3Nlc3QoXCJsaVwiKSxcblx0XHRcdFx0aW5kZXggPSBub2RlLmlkLnN1YnN0cig1LDEpLFxuXHRcdFx0XHR0aXRsZSA9IG5vZGUucXVlcnlTZWxlY3RvcihcIi50b2RvLXRleHRcIikudmFsdWUsXG5cdFx0XHRcdGRhdGUgPSBub2RlLnF1ZXJ5U2VsZWN0b3IoXCIudG9kby1kYXRlLWlucHV0XCIpLnZhbHVlLFxuXHRcdFx0XHRzdGF0ZSA9IG5vZGUuY2xhc3NOYW1lLnJlcGxhY2UoXCJlZGl0aW5nXCIsIFwiXCIpLnRyaW0oKTtcblx0XHRcdC8vIHVwZGF0ZSB0b2Rvc1x0XG5cdFx0XHR0b2RvQ29udHJvbGxlci5lZGl0KGluZGV4LHRpdGxlLGRhdGUsc3RhdGUpO1xuXHRcdH07XG5cblx0XHQvLyBjbGljayBldmVudHMgb24gdG9kb3Ncblx0XHRzZWxlY3RvcnMuZGl2VG9kb0xpc3QuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbihldmVudCkge1x0XG5cdFx0ICAvLyBjbGVhciB0b2RvIGxpc3QgZXZlbnRcblx0XHQgIGlmIChldmVudC50YXJnZXQuaWQgPT09ICdjbGVhci10b2RvcycpIHtcblx0XHQgIFx0dG9kb0NvbnRyb2xsZXIuY2xlYXIoKTtcblx0XHQgIH1cblx0XHQgIC8vIGNoZWNraW5nIGEgdG9kb1xuXHRcdCAgZWxzZSBpZiAoZXZlbnQudGFyZ2V0LnBhcmVudE5vZGUuY2xhc3NOYW1lID09PSAnY2hlY2tib3hlZCcpIHtcblx0XHQgIFx0dmFyIHNldENvbXBsZXRlID0gZXZlbnQudGFyZ2V0LnBhcmVudE5vZGUucGFyZW50Tm9kZTtcblx0XHQgIFx0c2V0Q29tcGxldGUuY2xhc3NMaXN0LnRvZ2dsZShcImNvbXBsZXRlZFwiKTtcblx0XHQgIFx0ZWRpdFRvZG9IYW5kbGVyKGV2ZW50KTtcblx0XHQgIH1cblx0XHR9KTtcblxuXHRcdC8vIGNsaWNrIGV2ZW50KGFuZCBibHVyKSBvbiB0b2RvJ3MgZGF0ZS90aXRsZVxuXHRcdHNlbGVjdG9ycy5kaXZUb2RvTGlzdC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uKGV2ZW50KSB7XHRcblx0XHQgIGlmIChldmVudC50YXJnZXQuY2xhc3NOYW1lID09PSAndG9kby10ZXh0JyB8fFxuXHRcdCAgXHQgIGV2ZW50LnRhcmdldC5jbGFzc05hbWUgPT09ICd0b2RvLWRhdGUtaW5wdXQnKSB7XG5cdFx0ICBcdCAgZXZlbnQudGFyZ2V0LmNsb3Nlc3QoXCJsaVwiKS5jbGFzc0xpc3QuYWRkKFwiZWRpdGluZ1wiKTtcblx0XHQgIFx0ICBldmVudC50YXJnZXQuYWRkRXZlbnRMaXN0ZW5lcihcImJsdXJcIiwgZWRpdFRvZG9IYW5kbGVyKTtcblx0XHQgIH1cblx0XHR9KTtcblx0fTtcblxuXHQvKipcbiAgICAqIGNvbnN0cnVjdG9yXG4gICAgKiBAcHJpdmF0ZVxuICAgICovXHRcblx0dmFyIGluaXQgPSAoZnVuY3Rpb24oKXtcblx0XHRcblx0XHRiaW5kRXZlbnRzKCk7XG5cblx0fSkoKTtcblxuICAgIC8qKlxuICAgICogTW9kdWxlJ3MgcHVibGljIGludGVyZmFjZVxuICAgICogQHJldHVybnMge29iamVjdH1cbiAgICAqL1xuXHRyZXR1cm4geyBcblx0XHRzZXQgOiBzZXRcblx0fTtcblxufSkoKTsiLCIvKipcbiogdG9kb0NvbnRyb2xsZXJcbiogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4qIGV4cG9zZSA6IFx0Z2V0XG4qIFx0XHRcdHNldFxuKiBcdFx0XHRyZW1vdmVcbiogXHRcdFx0Y2xlYXJcbiovXG52YXIgdG9kb0NvbnRyb2xsZXIgPSAoZnVuY3Rpb24oKSB7XG5cblx0dmFyIHRvZG9zID0gW107XG5cblx0LyoqXG4gICAgKiBnZXQgdG9kbyBsaXN0XG4gICAgKiBAcHVibGljXG4gICAgKi9cdFxuXHR2YXIgZ2V0ID0gZnVuY3Rpb24oKSB7XHRcdFxuXHRcdHZhciB0b2RvcyA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCd0b2RvJyk7XG5cdCAgICBpZiAodG9kb3MgIT09IG51bGwpIHtcblx0ICAgICAgICByZXR1cm4gSlNPTi5wYXJzZSh0b2Rvcyk7IFxuXHQgICAgfVxuXHR9O1xuXG5cdC8qKlxuICAgICogYWRkIGEgdG9kb1xuICAgICogQHB1YmxpY1xuICAgICovXHRcblx0dmFyIHNldCA9IGZ1bmN0aW9uKHRpdGxlLCBkYXRlKSB7XG5cdCAgICB0b2Rvcy5wdXNoKHtcblx0ICAgIFx0J3RpdGxlJyA6IHRpdGxlLFxuXHQgICAgXHQnZGF0ZScgIDogZGF0ZSxcblx0ICAgIFx0J3N0YXRlJyA6IFwiXCJcblx0ICAgIH0pO1xuXHQgICAgdG9kb3Muc29ydChjb21wYXJlU29ydCk7XG5cdFx0bG9jYWxTdG9yYWdlLnNldEl0ZW0oJ3RvZG8nLCBKU09OLnN0cmluZ2lmeSh0b2RvcykpO1xuXHRcdHRvZG9MaXN0LnNldCh0b2Rvcyk7XG5cdCAgICByZXR1cm4gZmFsc2U7XG5cdH07XG5cblx0LyoqXG4gICAgKiByZW1vdmUgYSB0b2RvXG4gICAgKiBAcHVibGljXG4gICAgKi9cdFxuXHR2YXIgcmVtb3ZlID0gZnVuY3Rpb24oaW5kZXgpIHtcblx0XHRpZiAoaW5kZXggPiAtMSkge1xuXHRcdCAgICB0b2Rvcy5zcGxpY2UoaW5kZXgsIDEpO1xuXHRcdH1cblx0XHRsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgndG9kbycsIEpTT04uc3RyaW5naWZ5KHRvZG9zKSk7XG5cdFx0dG9kb0xpc3Quc2V0KHRvZG9zKTtcblx0ICAgIHJldHVybiBmYWxzZTtcblx0fTtcblxuXHQvKipcbiAgICAqIGVkaXQgYSB0b2RvXG4gICAgKiBAcHVibGljXG4gICAgKi9cdFxuXHR2YXIgZWRpdCA9IGZ1bmN0aW9uKGluZGV4LCB0aXRsZSwgZGF0ZSwgc3RhdGUpIHtcblx0XHRpZiAoaW5kZXggJiYgdGl0bGUgJiYgZGF0ZSkge1xuXHRcdFx0dG9kb3NbaW5kZXhdLnRpdGxlID0gdGl0bGU7XG5cdFx0XHR0b2Rvc1tpbmRleF0uZGF0ZSA9IGRhdGU7XG5cdFx0XHR0b2Rvc1tpbmRleF0uc3RhdGUgPSBzdGF0ZTtcdFxuXHRcdFx0dG9kb3Muc29ydChjb21wYXJlU29ydCk7XHRcblx0XHRcdGxvY2FsU3RvcmFnZS5zZXRJdGVtKCd0b2RvJywgSlNPTi5zdHJpbmdpZnkodG9kb3MpKTtcblx0XHRcdHRvZG9MaXN0LnNldCh0b2Rvcyk7XG5cdFx0fVx0XHRcblx0ICAgIHJldHVybiBmYWxzZTtcblx0fTtcblxuXHQvKipcbiAgICAqIGNsZWFyIHRvZG8gbGlzdFxuICAgICogQHB1YmxpY1xuICAgICovXHRcblx0dmFyIGNsZWFyID0gZnVuY3Rpb24oKSB7XG5cdFx0dG9kb3MgPSBbXTtcblx0XHRsb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbSgndG9kbycpO1xuXHRcdHRvZG9MaXN0LnNldCh0b2Rvcyk7XG5cdCAgICByZXR1cm4gZmFsc2U7XG5cdH07XG5cblx0LyoqXG4gICAgKiBjb21wYXJlcyB0d28gZGF0ZXNcbiAgICAqIEBwcml2YXRlXG4gICAgKi9cdFxuXHR2YXIgY29tcGFyZVNvcnQgPSBmdW5jdGlvbihhLCBiKSB7XG5cdFx0ZGF0ZTEgPSBuZXcgRGF0ZShhLmRhdGUpO1xuXHRcdGRhdGUyID0gbmV3IERhdGUoYi5kYXRlKTtcblx0XHRpZiAoZGF0ZTEgPCBkYXRlMikgeyByZXR1cm4gLTE7IH1cblx0XHRlbHNlIHJldHVybiAxO1xuXHR9O1x0XG5cblx0LyoqXG4gICAgKiBjb25zdHJ1Y3RvclxuICAgICogQHByaXZhdGVcbiAgICAqL1x0XG5cdHZhciBpbml0ID0gKGZ1bmN0aW9uKCl7XG5cdFx0dG9kb3MgPSBnZXQoKTtcblx0XHRpZiAodG9kb3MpIHtcblx0XHRcdHRvZG9MaXN0LnNldCh0b2Rvcyk7XG5cdFx0fSBlbHNlIHtcblx0XHRcdHRvZG9zID0gW107XG5cdFx0fVx0XHRcblx0fSkoKTtcblxuICAgIC8qKlxuICAgICogTW9kdWxlJ3MgcHVibGljIGludGVyZmFjZVxuICAgICogQHJldHVybnMge29iamVjdH1cbiAgICAqL1xuXHRyZXR1cm4geyBcblx0XHRnZXQgOiBnZXQsXG5cdFx0c2V0IDogc2V0LFxuXHRcdHJlbW92ZSA6IHJlbW92ZSxcblx0XHRjbGVhciA6IGNsZWFyLFxuXHRcdGVkaXQgOiBlZGl0XG5cdH07XG5cbn0pKCk7IiwiLyoqXG4qIHRvZG9WaWV3XG4qIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuKi9cbnZhciB0b2RvVmlldyA9IChmdW5jdGlvbigpIHtcblxuXHQvLyB0b2RvIGFkZCBuZXcgc2VjdGlvblxuXHR2YXIgc2VsZWN0b3JzID0ge1xuXHRcdG5ld1RvZG8gICAgICAgICAgOiBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInRvZG9lci1hZGRcIiksICAgICAgICAgICAgIC8vIGZvcm1cblx0XHRuZXdUb2RvVGV4dCAgICAgIDogZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJ0b2RvZXItYWRkLXRleHRcIiksICAgICAgICAvLyB0ZXh0IGlucHV0XG5cdFx0bmV3VG9kb0RhdGVJbnB1dCA6IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwidG9kb2VyLWFkZC1kYXRlLWlucHV0XCIpLCAgLy8gZGF0ZSBpbnB1dFxuXHRcdG5ld1RvZG9EYXRlTGFiZWwgOiBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInRvZG9lci1hZGQtZGF0ZS1sYWJlbFwiKSwgIC8vIGRhdGUgbWFza1xuXHRcdGJ0blRvZG9TdWJtaXQgICAgOiBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInRvZG9lci1hZGQtc3VibWl0XCIpICAgICAgIC8vIHN1Ym1pdCBidXR0b25cblx0fTtcblxuXHQvKipcbiAgICAqIGFkZCBuZXcgdG9kbyB0ZXh0IGhhbmRsZXJcbiAgICAqIEBwcml2YXRlXG4gICAgKi9cdFxuXHR2YXIgbmV3VG9kb0hhbmRsZXIgPSBmdW5jdGlvbihlKSB7XG5cdFx0dGhpcy5jbGFzc0xpc3QuYWRkKCdhY3RpdmUnKTtcblx0XHRzZWxlY3RvcnMubmV3VG9kb1RleHQuZm9jdXMoKTtcblx0XHRlLnN0b3BQcm9wYWdhdGlvbigpO1xuXHRcdGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgb3V0c2lkZUNsaWNrSGFuZGxlcik7XG5cdH07XG5cblx0LyoqXG4gICAgKiBhZGQgbmV3IHRvZG8gZGF0ZSBoYW5kbGVyXG4gICAgKiBAcHJpdmF0ZVxuICAgICovXHRcblx0dmFyIG5ld1RvZG9EYXRlTGFiZWxIYW5kbGVyID0gZnVuY3Rpb24oZSkge1xuXHRcdHNlbGVjdG9ycy5uZXdUb2RvRGF0ZUxhYmVsLmNsYXNzTGlzdC5hZGQoXCJoaWRkZW5cIik7XG5cdFx0c2VsZWN0b3JzLm5ld1RvZG9EYXRlSW5wdXQuY2xpY2soKTtcblx0XHRzZWxlY3RvcnMubmV3VG9kb0RhdGVJbnB1dC5mb2N1cygpO1xuXHRcdGUuc3RvcFByb3BhZ2F0aW9uKCk7XG5cdH07XG5cblx0LyoqXG4gICAgKiBhZGQgbmV3IHRvZG8gc3VibWl0IGhhbmRsZXJcbiAgICAqIEBwcml2YXRlXG4gICAgKi9cdFxuXHR2YXIgYnRuVG9kb1N1Ym1pdEhhbmRsZXIgPSBmdW5jdGlvbihlKSB7XG5cdFx0ZS5zdG9wUHJvcGFnYXRpb24oKTtcblx0XHR2YXIgdGl0bGUgPSBzZWxlY3RvcnMubmV3VG9kb1RleHQudmFsdWU7XG5cdFx0dmFyIGRhdGUgPSBzZWxlY3RvcnMubmV3VG9kb0RhdGVJbnB1dC52YWx1ZTtcblx0XHRpZiAodGl0bGUgJiYgZGF0ZSkge1xuXHRcdFx0ZS5wcmV2ZW50RGVmYXVsdCgpO1xuXHRcdFx0dG9kb0NvbnRyb2xsZXIuc2V0KHRpdGxlLCBkYXRlKTtcblx0XHRcdHJlc2V0KCk7XG5cdFx0fVxuXHR9O1xuXG5cdC8qKlxuICAgICogY2xpY2tpbmcgb3V0c2lkZSB0aGUgYWRkIG5ldyB0b2RvIHNlY3Rpb24gY2xvc2VzIGl0XG4gICAgKiBAcHJpdmF0ZVxuICAgICovXHRcblx0dmFyIG91dHNpZGVDbGlja0hhbmRsZXIgPSBmdW5jdGlvbigpIHtcblx0XHRzZWxlY3RvcnMubmV3VG9kby5jbGFzc0xpc3QucmVtb3ZlKCdhY3RpdmUnKTtcblx0XHRzZWxlY3RvcnMubmV3VG9kb1RleHQuYmx1cigpO1xuXHRcdGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgb3V0c2lkZUNsaWNrSGFuZGxlcik7XG5cdFx0c2VsZWN0b3JzLm5ld1RvZG9EYXRlTGFiZWwuY2xhc3NMaXN0LnJlbW92ZShcImhpZGRlblwiKTtcblx0fTtcblxuXHQvKipcbiAgICAqIHV0aWxpdHkgZm9ybWF0IGRhdGVcbiAgICAqIEBwcml2YXRlXG4gICAgKi9cblx0dmFyIGZvcm1hdERhdGUgPSBmdW5jdGlvbihkKSB7XG5cdCAgdmFyIGRhdGUgPSBuZXcgRGF0ZShkKTtcblx0ICByZXR1cm4gW2RhdGUuZ2V0RGF0ZSgpLCBkYXRlLmdldE1vbnRoKCkrMSwgZGF0ZS5nZXRGdWxsWWVhcigpLnRvU3RyaW5nKCkuc3Vic3RyKDIsIDIpXS5qb2luKCcvJyk7XG5cdH07XG5cblx0LyoqXG4gICAgKiBjbGVhciB0b2RvIGlucHV0c1xuICAgICogQHByaXZhdGVcbiAgICAqL1xuXHR2YXIgcmVzZXQgPSBmdW5jdGlvbigpIHtcblx0XHRzZWxlY3RvcnMubmV3VG9kb1RleHQudmFsdWUgPSBcIlwiO1xuXHRcdHNlbGVjdG9ycy5uZXdUb2RvRGF0ZUlucHV0LnZhbHVlID0gXCJcIjtcblx0XHRvdXRzaWRlQ2xpY2tIYW5kbGVyKCk7XG5cdH07XG5cblx0LyoqXG4gICAgKiBiaW5kIGV2ZW50c1xuICAgICogQHByaXZhdGVcbiAgICAqL1xuXHR2YXIgYmluZEV2ZW50cyA9IGZ1bmN0aW9uKCkge1xuXHRcdHNlbGVjdG9ycy5uZXdUb2RvLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgbmV3VG9kb0hhbmRsZXIpO1xuXHRcdHNlbGVjdG9ycy5uZXdUb2RvRGF0ZUxhYmVsLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgbmV3VG9kb0RhdGVMYWJlbEhhbmRsZXIpO1xuXHRcdHNlbGVjdG9ycy5uZXdUb2RvRGF0ZUlucHV0LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgbmV3VG9kb0RhdGVMYWJlbEhhbmRsZXIpO1xuXHRcdHNlbGVjdG9ycy5idG5Ub2RvU3VibWl0LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgYnRuVG9kb1N1Ym1pdEhhbmRsZXIpO1xuXHR9O1xuXHRcblx0LyoqXG4gICAgKiBjb25zdHJ1Y3RvclxuICAgICogQHByaXZhdGVcbiAgICAqL1x0XG5cdHZhciBpbml0ID0gKGZ1bmN0aW9uKCl7XG5cdFx0YmluZEV2ZW50cygpO1x0XHRcblx0fSkoKTtcblxuICAgIC8qKlxuICAgICogTW9kdWxlJ3MgcHVibGljIGludGVyZmFjZVxuICAgICogQHJldHVybnMge29iamVjdH1cbiAgICAqL1xuXHRyZXR1cm4geyB9O1xuXG59KSgpOyAiXX0=
