var todoList=function(){var t={divTodoList:document.getElementById("todoer-list-section")},e=function(e){var o="",n=e.length;if(n>0){o='<ul id="todoer-list">';for(var d=0;d<n;d++)o+='<li id="todo-'+d+'" class="'+e[d].state+'"><button class="checkboxed"><i class="fa fa-check" aria-hidden="true"></i></button><input class="todo-text" type="text" value="'+e[d].title+'" required></input><div class="todo-date"><i class="fa fa-calendar-o" aria-hidden="true"></i><input class="todo-date-input" type="date" value="'+e[d].date+'" required></input></div></li>';o+="</ul>";o+='<div class="div-actions container"><button id="clear-todos">Clear todos</button></div>'}else o="<p>You donâ€™t have anything to do. <strong>Add something now</strong>.</p>";t.divTodoList.innerHTML=o;return!1},o=function(){var e=function(t){t.target.closest("li").classList.remove("editing");var e=t.target.closest("li"),o=e.id.substr(5,1),n=e.querySelector(".todo-text").value,d=e.querySelector(".todo-date-input").value,a=e.className.replace("editing","").trim();todoController.edit(o,n,d,a)};t.divTodoList.addEventListener("click",function(t){if("clear-todos"===t.target.id)todoController.clear();else if("checkboxed"===t.target.parentNode.className){var o=t.target.parentNode.parentNode;o.classList.toggle("completed");e(t)}});t.divTodoList.addEventListener("click",function(t){if("todo-text"===t.target.className||"todo-date-input"===t.target.className){t.target.closest("li").classList.add("editing");t.target.addEventListener("blur",e)}})};(function(){o()})();return{set:e}}(),todoController=function(){var t=[],e=function(){var t=localStorage.getItem("todo");if(null!==t)return JSON.parse(t)},o=function(e,o){t.push({title:e,date:o,state:""});t.sort(i);localStorage.setItem("todo",JSON.stringify(t));todoList.set(t);return!1},n=function(e){e>-1&&t.splice(e,1);localStorage.setItem("todo",JSON.stringify(t));todoList.set(t);return!1},d=function(e,o,n,d){if(e&&o&&n){t[e].title=o;t[e].date=n;t[e].state=d;t.sort(i);localStorage.setItem("todo",JSON.stringify(t));todoList.set(t)}return!1},a=function(){t=[];localStorage.removeItem("todo");todoList.set(t);return!1},i=function(t,e){date1=new Date(t.date);date2=new Date(e.date);return date1<date2?-1:date1>date2?1:0};(function(){t=e();t?todoList.set(t):t=[]})();return{get:e,set:o,remove:n,clear:a,edit:d}}(),todoView=function(){var t={newTodo:document.getElementById("todoer-add"),newTodoText:document.getElementById("todoer-add-text"),newTodoDateInput:document.getElementById("todoer-add-date-input"),newTodoDateLabel:document.getElementById("todoer-add-date-label"),btnTodoSubmit:document.getElementById("todoer-add-submit")},e=function(e){this.classList.add("active");t.newTodoText.focus();e.stopPropagation();document.addEventListener("click",d)},o=function(e){t.newTodoDateLabel.classList.add("hidden");t.newTodoDateInput.click();t.newTodoDateInput.focus();e.stopPropagation()},n=function(e){e.stopPropagation();var o=t.newTodoText.value,n=t.newTodoDateInput.value;if(o&&n){e.preventDefault();todoController.set(o,n);a()}},d=function(){t.newTodo.classList.remove("active");t.newTodoText.blur();document.removeEventListener("click",d);t.newTodoDateLabel.classList.remove("hidden")},a=function(){t.newTodoText.value="";t.newTodoDateInput.value="";d()},i=function(){t.newTodo.addEventListener("click",e);t.newTodoDateLabel.addEventListener("click",o);t.newTodoDateInput.addEventListener("click",o);t.btnTodoSubmit.addEventListener("click",n)};(function(){i()})();return{}}();!function(){console.log("todo app started")}();
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInRvZG9MaXN0LmpzIiwidG9kb0NvbnRyb2xsZXIuanMiLCJ0b2RvVmlldy5qcyIsInRvZG9lci5qcyJdLCJuYW1lcyI6WyJ0b2RvTGlzdCIsInNlbGVjdG9ycyIsImRpdlRvZG9MaXN0IiwiZG9jdW1lbnQiLCJnZXRFbGVtZW50QnlJZCIsInNldCIsInRvZG9zIiwidG9kb0xpc3RTdHIiLCJ0b2RvQ291bnQiLCJsZW5ndGgiLCJpIiwic3RhdGUiLCJ0aXRsZSIsImRhdGUiLCJpbm5lckhUTUwiLCJiaW5kRXZlbnRzIiwiZWRpdFRvZG9IYW5kbGVyIiwiZSIsInRhcmdldCIsImNsb3Nlc3QiLCJjbGFzc0xpc3QiLCJyZW1vdmUiLCJub2RlIiwiaW5kZXgiLCJpZCIsInN1YnN0ciIsInF1ZXJ5U2VsZWN0b3IiLCJ2YWx1ZSIsImNsYXNzTmFtZSIsInJlcGxhY2UiLCJ0cmltIiwidG9kb0NvbnRyb2xsZXIiLCJlZGl0IiwiYWRkRXZlbnRMaXN0ZW5lciIsImV2ZW50IiwiY2xlYXIiLCJwYXJlbnROb2RlIiwic2V0Q29tcGxldGUiLCJ0b2dnbGUiLCJhZGQiLCJnZXQiLCJsb2NhbFN0b3JhZ2UiLCJnZXRJdGVtIiwiSlNPTiIsInBhcnNlIiwicHVzaCIsInNvcnQiLCJjb21wYXJlU29ydCIsInNldEl0ZW0iLCJzdHJpbmdpZnkiLCJzcGxpY2UiLCJyZW1vdmVJdGVtIiwiYSIsImIiLCJkYXRlMSIsIkRhdGUiLCJkYXRlMiIsInRvZG9WaWV3IiwibmV3VG9kbyIsIm5ld1RvZG9UZXh0IiwibmV3VG9kb0RhdGVJbnB1dCIsIm5ld1RvZG9EYXRlTGFiZWwiLCJidG5Ub2RvU3VibWl0IiwibmV3VG9kb0hhbmRsZXIiLCJ0aGlzIiwiZm9jdXMiLCJzdG9wUHJvcGFnYXRpb24iLCJvdXRzaWRlQ2xpY2tIYW5kbGVyIiwibmV3VG9kb0RhdGVMYWJlbEhhbmRsZXIiLCJjbGljayIsImJ0blRvZG9TdWJtaXRIYW5kbGVyIiwicHJldmVudERlZmF1bHQiLCJyZXNldCIsImJs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LE1BT0FwRCxFQUFBLFdBQ0FkLEVBQUF5RCxRQUFBekIsaUJBQUEsUUFBQThCLEVBQ0E5RCxHQUFBNEQsaUJBQUE1QixpQkFBQSxRQUFBbUMsRUFDQW5FLEdBQUEyRCxpQkFBQTNCLGlCQUFBLFFBQUFtQyxFQUNBbkUsR0FBQTZELGNBQUE3QixpQkFBQSxRQUFBcUMsS0FPQSxXQUNBdkQsT0FPQSxjQ3JHQSxXQUNBNEQsUUFBQUMsSUFBQSIsImZpbGUiOiJ0b2RvZXIuanMiLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiogdG9kb0xpc3RcbiogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4qIGV4cG9zZSA6IFx0YWRkXG4qIFx0XHRcdHJlbW92ZVxuKiBcdFx0XHRzZXRcbiovXG52YXIgdG9kb0xpc3QgPSAoZnVuY3Rpb24oKSB7XG5cblx0dmFyIHNlbGVjdG9ycyA9IHtcblx0XHRkaXZUb2RvTGlzdCA6IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwidG9kb2VyLWxpc3Qtc2VjdGlvblwiKVxuXHR9O1xuXG5cdC8qKlxuICAgICogc2V0IHRvZG8gbGlzdFxuICAgICogQHB1YmxpY1xuICAgICovXHRcblx0dmFyIHNldCA9IGZ1bmN0aW9uKHRvZG9zKSB7XG5cblx0XHR2YXIgdG9kb0xpc3RTdHIgPSBcIlwiLFxuXHRcdFx0dG9kb0NvdW50ICAgPSB0b2Rvcy5sZW5ndGg7XG5cblx0XHRpZiAodG9kb0NvdW50ID4gMCkge1xuXG5cdFx0XHR0b2RvTGlzdFN0ciA9ICc8dWwgaWQ9XCJ0b2RvZXItbGlzdFwiPic7XG5cblx0XHRcdGZvciAodmFyIGkgPSAwOyBpIDwgdG9kb0NvdW50OyBpKyspIHtcblx0XHRcdFx0dG9kb0xpc3RTdHIgKz0gJzxsaSBpZD1cInRvZG8tJytpKydcIiBjbGFzcz1cIicrdG9kb3NbaV0uc3RhdGUrJ1wiPicgK1xuXHRcdFx0XHRcdCc8YnV0dG9uIGNsYXNzPVwiY2hlY2tib3hlZFwiPjxpIGNsYXNzPVwiZmEgZmEtY2hlY2tcIiBhcmlhLWhpZGRlbj1cInRydWVcIj48L2k+PC9idXR0b24+JyArXG5cdFx0XHRcdFx0JzxpbnB1dCBjbGFzcz1cInRvZG8tdGV4dFwiIHR5cGU9XCJ0ZXh0XCIgdmFsdWU9XCInK3RvZG9zW2ldLnRpdGxlKydcIiByZXF1aXJlZD48L2lucHV0PicgK1xuXHRcdFx0XHRcdCc8ZGl2IGNsYXNzPVwidG9kby1kYXRlXCI+JyArXG5cdFx0XHRcdFx0XHQnPGkgY2xhc3M9XCJmYSBmYS1jYWxlbmRhci1vXCIgYXJpYS1oaWRkZW49XCJ0cnVlXCI+PC9pPicgK1xuXHRcdFx0XHRcdFx0JzxpbnB1dCBjbGFzcz1cInRvZG8tZGF0ZS1pbnB1dFwiIHR5cGU9XCJkYXRlXCIgdmFsdWU9XCInK3RvZG9zW2ldLmRhdGUrJ1wiIHJlcXVpcmVkPjwvaW5wdXQ+JyArXG5cdFx0XHRcdFx0JzwvZGl2PicgK1xuXHRcdFx0XHQnPC9saT4nO1xuXHRcdFx0fVxuXG5cdFx0XHR0b2RvTGlzdFN0ciArPSAnPC91bD4nO1xuXG5cdFx0XHR0b2RvTGlzdFN0ciArPSAnPGRpdiBjbGFzcz1cImRpdi1hY3Rpb25zIGNvbnRhaW5lclwiPjxidXR0b24gaWQ9XCJjbGVhci10b2Rvc1wiPkNsZWFyIHRvZG9zPC9idXR0b24+PC9kaXY+JztcblxuXHRcdH0gZWxzZSB7XG5cdFx0XHR0b2RvTGlzdFN0ciA9IFwiPHA+WW91IGRvbuKAmXQgaGF2ZSBhbnl0aGluZyB0byBkby4gPHN0cm9uZz5BZGQgc29tZXRoaW5nIG5vdzwvc3Ryb25nPi48L3A+XCI7XG5cdFx0fVxuXG5cdFx0c2VsZWN0b3JzLmRpdlRvZG9MaXN0LmlubmVySFRNTCA9IHRvZG9MaXN0U3RyO1xuXHRcdHJldHVybiBmYWxzZTtcblxuXHR9O1xuXG5cdC8qKlxuICAgICogYmluZCBldmVudHNcbiAgICAqIEBwcml2YXRlXG4gICAgKi9cdFxuXHR2YXIgYmluZEV2ZW50cyA9IGZ1bmN0aW9uKCl7XHRcblxuXHRcdC8vIHVwZGF0ZSBvdXIgbW9kZWwgYWZ0ZXIgZWRpdGluZ1xuXHRcdHZhciBlZGl0VG9kb0hhbmRsZXIgPSBmdW5jdGlvbihlKSB7XHRcdFxuXHRcdFx0ZS50YXJnZXQuY2xvc2VzdChcImxpXCIpLmNsYXNzTGlzdC5yZW1vdmUoXCJlZGl0aW5nXCIpO1x0XG5cdFx0XHR2YXIgbm9kZSA9IGUudGFyZ2V0LmNsb3Nlc3QoXCJsaVwiKSxcblx0XHRcdFx0aW5kZXggPSBub2RlLmlkLnN1YnN0cig1LDEpLFxuXHRcdFx0XHR0aXRsZSA9IG5vZGUucXVlcnlTZWxlY3RvcihcIi50b2RvLXRleHRcIikudmFsdWUsXG5cdFx0XHRcdGRhdGUgPSBub2RlLnF1ZXJ5U2VsZWN0b3IoXCIudG9kby1kYXRlLWlucHV0XCIpLnZhbHVlLFxuXHRcdFx0XHRzdGF0ZSA9IG5vZGUuY2xhc3NOYW1lLnJlcGxhY2UoXCJlZGl0aW5nXCIsIFwiXCIpLnRyaW0oKTtcblx0XHRcdC8vIHVwZGF0ZSB0b2Rvc1x0XG5cdFx0XHR0b2RvQ29udHJvbGxlci5lZGl0KGluZGV4LHRpdGxlLGRhdGUsc3RhdGUpO1xuXHRcdH07XG5cblx0XHQvLyBjbGljayBldmVudHMgb24gdG9kb3Ncblx0XHRzZWxlY3RvcnMuZGl2VG9kb0xpc3QuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbihldmVudCkge1x0XG5cdFx0ICAvLyBjbGVhciB0b2RvIGxpc3QgZXZlbnRcblx0XHQgIGlmIChldmVudC50YXJnZXQuaWQgPT09ICdjbGVhci10b2RvcycpIHtcblx0XHQgIFx0dG9kb0NvbnRyb2xsZXIuY2xlYXIoKTtcblx0XHQgIH1cblx0XHQgIC8vIGNoZWNraW5nIGEgdG9kb1xuXHRcdCAgZWxzZSBpZiAoZXZlbnQudGFyZ2V0LnBhcmVudE5vZGUuY2xhc3NOYW1lID09PSAnY2hlY2tib3hlZCcpIHtcblx0XHQgIFx0dmFyIHNldENvbXBsZXRlID0gZXZlbnQudGFyZ2V0LnBhcmVudE5vZGUucGFyZW50Tm9kZTtcblx0XHQgIFx0c2V0Q29tcGxldGUuY2xhc3NMaXN0LnRvZ2dsZShcImNvbXBsZXRlZFwiKTtcblx0XHQgIFx0ZWRpdFRvZG9IYW5kbGVyKGV2ZW50KTtcblx0XHQgIH1cblx0XHR9KTtcblxuXHRcdC8vIGNsaWNrIGV2ZW50KGFuZCBibHVyKSBvbiB0b2RvJ3MgZGF0ZS90aXRsZVxuXHRcdHNlbGVjdG9ycy5kaXZUb2RvTGlzdC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uKGV2ZW50KSB7XHRcblx0XHQgIGlmIChldmVudC50YXJnZXQuY2xhc3NOYW1lID09PSAndG9kby10ZXh0JyB8fFxuXHRcdCAgXHQgIGV2ZW50LnRhcmdldC5jbGFzc05hbWUgPT09ICd0b2RvLWRhdGUtaW5wdXQnKSB7XG5cdFx0ICBcdCAgZXZlbnQudGFyZ2V0LmNsb3Nlc3QoXCJsaVwiKS5jbGFzc0xpc3QuYWRkKFwiZWRpdGluZ1wiKTtcblx0XHQgIFx0ICBldmVudC50YXJnZXQuYWRkRXZlbnRMaXN0ZW5lcihcImJsdXJcIiwgZWRpdFRvZG9IYW5kbGVyKTtcblx0XHQgIH1cblx0XHR9KTtcblx0fTtcblxuXHQvKipcbiAgICAqIGNvbnN0cnVjdG9yXG4gICAgKiBAcHJpdmF0ZVxuICAgICovXHRcblx0dmFyIGluaXQgPSAoZnVuY3Rpb24oKXtcblx0XHRcblx0XHRiaW5kRXZlbnRzKCk7XG5cblx0fSkoKTtcblxuICAgIC8qKlxuICAgICogTW9kdWxlJ3MgcHVibGljIGludGVyZmFjZVxuICAgICogQHJldHVybnMge29iamVjdH1cbiAgICAqL1xuXHRyZXR1cm4geyBcblx0XHRzZXQgOiBzZXRcblx0fTtcblxufSkoKTsiLCIvKipcbiogdG9kb0NvbnRyb2xsZXJcbiogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4qIGV4cG9zZSA6IFx0Z2V0XG4qIFx0XHRcdHNldFxuKiBcdFx0XHRyZW1vdmVcbiogXHRcdFx0Y2xlYXJcbiovXG52YXIgdG9kb0NvbnRyb2xsZXIgPSAoZnVuY3Rpb24oKSB7XG5cblx0dmFyIHRvZG9zID0gW107XG5cblx0LyoqXG4gICAgKiBnZXQgdG9kbyBsaXN0XG4gICAgKiBAcHVibGljXG4gICAgKi9cdFxuXHR2YXIgZ2V0ID0gZnVuY3Rpb24oKSB7XHRcdFxuXHRcdHZhciB0b2RvcyA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCd0b2RvJyk7XG5cdCAgICBpZiAodG9kb3MgIT09IG51bGwpIHtcblx0ICAgICAgICByZXR1cm4gSlNPTi5wYXJzZSh0b2Rvcyk7IFxuXHQgICAgfVxuXHR9O1xuXG5cdC8qKlxuICAgICogYWRkIGEgdG9kb1xuICAgICogQHB1YmxpY1xuICAgICovXHRcblx0dmFyIHNldCA9IGZ1bmN0aW9uKHRpdGxlLCBkYXRlKSB7XG5cdCAgICB0b2Rvcy5wdXNoKHtcblx0ICAgIFx0J3RpdGxlJyA6IHRpdGxlLFxuXHQgICAgXHQnZGF0ZScgIDogZGF0ZSxcblx0ICAgIFx0J3N0YXRlJyA6IFwiXCJcblx0ICAgIH0pO1xuXHQgICAgdG9kb3Muc29ydChjb21wYXJlU29ydCk7XG5cdFx0bG9jYWxTdG9yYWdlLnNldEl0ZW0oJ3RvZG8nLCBKU09OLnN0cmluZ2lmeSh0b2RvcykpO1xuXHRcdHRvZG9MaXN0LnNldCh0b2Rvcyk7XG5cdCAgICByZXR1cm4gZmFsc2U7XG5cdH07XG5cblx0LyoqXG4gICAgKiByZW1vdmUgYSB0b2RvXG4gICAgKiBAcHVibGljXG4gICAgKi9cdFxuXHR2YXIgcmVtb3ZlID0gZnVuY3Rpb24oaW5kZXgpIHtcblx0XHRpZiAoaW5kZXggPiAtMSkge1xuXHRcdCAgICB0b2Rvcy5zcGxpY2UoaW5kZXgsIDEpO1xuXHRcdH1cblx0XHRsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgndG9kbycsIEpTT04uc3RyaW5naWZ5KHRvZG9zKSk7XG5cdFx0dG9kb0xpc3Quc2V0KHRvZG9zKTtcblx0ICAgIHJldHVybiBmYWxzZTtcblx0fTtcblxuXHQvKipcbiAgICAqIGVkaXQgYSB0b2RvXG4gICAgKiBAcHVibGljXG4gICAgKi9cdFxuXHR2YXIgZWRpdCA9IGZ1bmN0aW9uKGluZGV4LCB0aXRsZSwgZGF0ZSwgc3RhdGUpIHtcblx0XHRpZiAoaW5kZXggJiYgdGl0bGUgJiYgZGF0ZSkge1xuXHRcdFx0dG9kb3NbaW5kZXhdLnRpdGxlID0gdGl0bGU7XG5cdFx0XHR0b2Rvc1tpbmRleF0uZGF0ZSA9IGRhdGU7XG5cdFx0XHR0b2Rvc1tpbmRleF0uc3RhdGUgPSBzdGF0ZTtcdFxuXHRcdFx0dG9kb3Muc29ydChjb21wYXJlU29ydCk7XHRcblx0XHRcdGxvY2FsU3RvcmFnZS5zZXRJdGVtKCd0b2RvJywgSlNPTi5zdHJpbmdpZnkodG9kb3MpKTtcblx0XHRcdHRvZG9MaXN0LnNldCh0b2Rvcyk7XG5cdFx0fVx0XHRcblx0ICAgIHJldHVybiBmYWxzZTtcblx0fTtcblxuXHQvKipcbiAgICAqIGNsZWFyIHRvZG8gbGlzdFxuICAgICogQHB1YmxpY1xuICAgICovXHRcblx0dmFyIGNsZWFyID0gZnVuY3Rpb24oKSB7XG5cdFx0dG9kb3MgPSBbXTtcblx0XHRsb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbSgndG9kbycpO1xuXHRcdHRvZG9MaXN0LnNldCh0b2Rvcyk7XG5cdCAgICByZXR1cm4gZmFsc2U7XG5cdH07XG5cblx0LyoqXG4gICAgKiBjb21wYXJlcyB0d28gZGF0ZXNcbiAgICAqIEBwcml2YXRlXG4gICAgKi9cdFxuXHR2YXIgY29tcGFyZVNvcnQgPSBmdW5jdGlvbihhLCBiKSB7XG5cdFx0ZGF0ZTEgPSBuZXcgRGF0ZShhLmRhdGUpO1xuXHRcdGRhdGUyID0gbmV3IERhdGUoYi5kYXRlKTtcblx0XHRpZiAoZGF0ZTEgPCBkYXRlMikgeyByZXR1cm4gLTE7IH1cblx0XHRlbHNlIGlmIChkYXRlMSA+IGRhdGUyKSB7IHJldHVybiAxOyB9XG5cdFx0ZWxzZSByZXR1cm4gMDtcblx0fTtcdFxuXG5cdC8qKlxuICAgICogY29uc3RydWN0b3JcbiAgICAqIEBwcml2YXRlXG4gICAgKi9cdFxuXHR2YXIgaW5pdCA9IChmdW5jdGlvbigpe1xuXHRcdHRvZG9zID0gZ2V0KCk7XG5cdFx0aWYgKHRvZG9zKSB7XG5cdFx0XHR0b2RvTGlzdC5zZXQodG9kb3MpO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHR0b2RvcyA9IFtdO1xuXHRcdH1cdFx0XG5cdH0pKCk7XG5cbiAgICAvKipcbiAgICAqIE1vZHVsZSdzIHB1YmxpYyBpbnRlcmZhY2VcbiAgICAqIEByZXR1cm5zIHtvYmplY3R9XG4gICAgKi9cblx0cmV0dXJuIHsgXG5cdFx0Z2V0IDogZ2V0LFxuXHRcdHNldCA6IHNldCxcblx0XHRyZW1vdmUgOiByZW1vdmUsXG5cdFx0Y2xlYXIgOiBjbGVhcixcblx0XHRlZGl0IDogZWRpdFxuXHR9O1xuXG59KSgpOyIsIi8qKlxuKiB0b2RvVmlld1xuKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiovXG52YXIgdG9kb1ZpZXcgPSAoZnVuY3Rpb24oKSB7XG5cblx0Ly8gdG9kbyBhZGQgbmV3IHNlY3Rpb25cblx0dmFyIHNlbGVjdG9ycyA9IHtcblx0XHRuZXdUb2RvICAgICAgICAgIDogZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJ0b2RvZXItYWRkXCIpLCAgICAgICAgICAgICAvLyBmb3JtXG5cdFx0bmV3VG9kb1RleHQgICAgICA6IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwidG9kb2VyLWFkZC10ZXh0XCIpLCAgICAgICAgLy8gdGV4dCBpbnB1dFxuXHRcdG5ld1RvZG9EYXRlSW5wdXQgOiBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInRvZG9lci1hZGQtZGF0ZS1pbnB1dFwiKSwgIC8vIGRhdGUgaW5wdXRcblx0XHRuZXdUb2RvRGF0ZUxhYmVsIDogZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJ0b2RvZXItYWRkLWRhdGUtbGFiZWxcIiksICAvLyBkYXRlIG1hc2tcblx0XHRidG5Ub2RvU3VibWl0ICAgIDogZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJ0b2RvZXItYWRkLXN1Ym1pdFwiKSAgICAgICAvLyBzdWJtaXQgYnV0dG9uXG5cdH07XG5cblx0LyoqXG4gICAgKiBhZGQgbmV3IHRvZG8gdGV4dCBoYW5kbGVyXG4gICAgKiBAcHJpdmF0ZVxuICAgICovXHRcblx0dmFyIG5ld1RvZG9IYW5kbGVyID0gZnVuY3Rpb24oZSkge1xuXHRcdHRoaXMuY2xhc3NMaXN0LmFkZCgnYWN0aXZlJyk7XG5cdFx0c2VsZWN0b3JzLm5ld1RvZG9UZXh0LmZvY3VzKCk7XG5cdFx0ZS5zdG9wUHJvcGFnYXRpb24oKTtcblx0XHRkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIG91dHNpZGVDbGlja0hhbmRsZXIpO1xuXHR9O1xuXG5cdC8qKlxuICAgICogYWRkIG5ldyB0b2RvIGRhdGUgaGFuZGxlclxuICAgICogQHByaXZhdGVcbiAgICAqL1x0XG5cdHZhciBuZXdUb2RvRGF0ZUxhYmVsSGFuZGxlciA9IGZ1bmN0aW9uKGUpIHtcblx0XHRzZWxlY3RvcnMubmV3VG9kb0RhdGVMYWJlbC5jbGFzc0xpc3QuYWRkKFwiaGlkZGVuXCIpO1xuXHRcdHNlbGVjdG9ycy5uZXdUb2RvRGF0ZUlucHV0LmNsaWNrKCk7XG5cdFx0c2VsZWN0b3JzLm5ld1RvZG9EYXRlSW5wdXQuZm9jdXMoKTtcblx0XHRlLnN0b3BQcm9wYWdhdGlvbigpO1xuXHR9O1xuXG5cdC8qKlxuICAgICogYWRkIG5ldyB0b2RvIHN1Ym1pdCBoYW5kbGVyXG4gICAgKiBAcHJpdmF0ZVxuICAgICovXHRcblx0dmFyIGJ0blRvZG9TdWJtaXRIYW5kbGVyID0gZnVuY3Rpb24oZSkge1xuXHRcdGUuc3RvcFByb3BhZ2F0aW9uKCk7XG5cdFx0dmFyIHRpdGxlID0gc2VsZWN0b3JzLm5ld1RvZG9UZXh0LnZhbHVlO1xuXHRcdHZhciBkYXRlID0gc2VsZWN0b3JzLm5ld1RvZG9EYXRlSW5wdXQudmFsdWU7XG5cdFx0aWYgKHRpdGxlICYmIGRhdGUpIHtcblx0XHRcdGUucHJldmVudERlZmF1bHQoKTtcblx0XHRcdHRvZG9Db250cm9sbGVyLnNldCh0aXRsZSwgZGF0ZSk7XG5cdFx0XHRyZXNldCgpO1xuXHRcdH1cblx0fTtcblxuXHQvKipcbiAgICAqIGNsaWNraW5nIG91dHNpZGUgdGhlIGFkZCBuZXcgdG9kbyBzZWN0aW9uIGNsb3NlcyBpdFxuICAgICogQHByaXZhdGVcbiAgICAqL1x0XG5cdHZhciBvdXRzaWRlQ2xpY2tIYW5kbGVyID0gZnVuY3Rpb24oKSB7XG5cdFx0c2VsZWN0b3JzLm5ld1RvZG8uY2xhc3NMaXN0LnJlbW92ZSgnYWN0aXZlJyk7XG5cdFx0c2VsZWN0b3JzLm5ld1RvZG9UZXh0LmJsdXIoKTtcblx0XHRkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCdjbGljaycsIG91dHNpZGVDbGlja0hhbmRsZXIpO1xuXHRcdHNlbGVjdG9ycy5uZXdUb2RvRGF0ZUxhYmVsLmNsYXNzTGlzdC5yZW1vdmUoXCJoaWRkZW5cIik7XG5cdH07XG5cblx0LyoqXG4gICAgKiB1dGlsaXR5IGZvcm1hdCBkYXRlXG4gICAgKiBAcHJpdmF0ZVxuICAgICovXG5cdHZhciBmb3JtYXREYXRlID0gZnVuY3Rpb24oZCkge1xuXHQgIHZhciBkYXRlID0gbmV3IERhdGUoZCk7XG5cdCAgcmV0dXJuIFtkYXRlLmdldERhdGUoKSwgZGF0ZS5nZXRNb250aCgpKzEsIGRhdGUuZ2V0RnVsbFllYXIoKS50b1N0cmluZygpLnN1YnN0cigyLCAyKV0uam9pbignLycpO1xuXHR9O1xuXG5cdC8qKlxuICAgICogY2xlYXIgdG9kbyBpbnB1dHNcbiAgICAqIEBwcml2YXRlXG4gICAgKi9cblx0dmFyIHJlc2V0ID0gZnVuY3Rpb24oKSB7XG5cdFx0c2VsZWN0b3JzLm5ld1RvZG9UZXh0LnZhbHVlID0gXCJcIjtcblx0XHRzZWxlY3RvcnMubmV3VG9kb0RhdGVJbnB1dC52YWx1ZSA9IFwiXCI7XG5cdFx0b3V0c2lkZUNsaWNrSGFuZGxlcigpO1xuXHR9O1xuXG5cdC8qKlxuICAgICogYmluZCBldmVudHNcbiAgICAqIEBwcml2YXRlXG4gICAgKi9cblx0dmFyIGJpbmRFdmVudHMgPSBmdW5jdGlvbigpIHtcblx0XHRzZWxlY3RvcnMubmV3VG9kby5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIG5ld1RvZG9IYW5kbGVyKTtcblx0XHRzZWxlY3RvcnMubmV3VG9kb0RhdGVMYWJlbC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIG5ld1RvZG9EYXRlTGFiZWxIYW5kbGVyKTtcblx0XHRzZWxlY3RvcnMubmV3VG9kb0RhdGVJbnB1dC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIG5ld1RvZG9EYXRlTGFiZWxIYW5kbGVyKTtcblx0XHRzZWxlY3RvcnMuYnRuVG9kb1N1Ym1pdC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGJ0blRvZG9TdWJtaXRIYW5kbGVyKTtcblx0fTtcblx0XG5cdC8qKlxuICAgICogY29uc3RydWN0b3JcbiAgICAqIEBwcml2YXRlXG4gICAgKi9cdFxuXHR2YXIgaW5pdCA9IChmdW5jdGlvbigpe1xuXHRcdGJpbmRFdmVudHMoKTtcdFx0XG5cdH0pKCk7XG5cbiAgICAvKipcbiAgICAqIE1vZHVsZSdzIHB1YmxpYyBpbnRlcmZhY2VcbiAgICAqIEByZXR1cm5zIHtvYmplY3R9XG4gICAgKi9cblx0cmV0dXJuIHsgfTtcblxufSkoKTsgIiwiLyoqXG4qIHRvZG9lclxuKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiovXG4oZnVuY3Rpb24oKXtcblx0Y29uc29sZS5sb2coXCJ0b2RvIGFwcCBzdGFydGVkXCIpO1xufSkoKTsiXX0=
